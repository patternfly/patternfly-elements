{"version":3,"file":"pfe-autocomplete.min.js","sources":["pfe-autocomplete.js"],"sourcesContent":["import PFElement from '../pfelement/pfelement.js';\n\n/*\n * @license\n * Copyright 2019 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nconst KEYCODE = {\n  ENTER: 13,\n  DOWN: 40,\n  UP: 38,\n  ESC: 27\n};\n\n// use this variable to debounce api call when user types very fast\nlet throttle = false;\n\nclass PfeAutocomplete extends PFElement {\n\n  get html() {\n    return `<style>:host{display:block;position:relative}.input-box-wrapper{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}#input-box-wrapper ::slotted(input){width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-shadow:inset 0 0 0 rgba(0,0,0,.075)!important;box-shadow:inset 0 0 0 rgba(0,0,0,.075)!important;padding-left:10px;padding-right:30px;border-radius:0;background-color:#fff;border:1px solid #d2d2d2;border:1px solid var(--pfe-theme--color--surface--border,#d2d2d2);font-size:16px;height:40px;-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;opacity:1;outline:0}#input-box-wrapper ::slotted(input:disabled),button:disabled{cursor:not-allowed;background-color:transparent;color:#ccc;opacity:.5}#input-box-wrapper ::slotted(input:focus),#input-box-wrapper button:focus{border-color:#66afe9;outline:0}#input-box-wrapper ::slotted(input),button{-webkit-appearance:none}#input-box-wrapper ::slotted([type=search]::-ms-clear){display:none}#input-box-wrapper ::slotted(input[type=search]::-webkit-search-cancel-button),#input-box-wrapper ::slotted(input[type=search]::-webkit-search-decoration){-webkit-appearance:none}button{color:#ccc;background-color:transparent;border:none;position:absolute;top:0;bottom:0;padding:0;margin:0;cursor:pointer}button.clear-search{right:30px;width:20px;margin:2px 1px;background-color:#fff}button.clear-search svg{width:12px;stroke:#ccc}button.clear-search:focus svg,button.clear-search:hover svg{opacity:1;stroke:#06c}button[disabled].clear-search:focus svg,button[disabled].clear-search:hover svg{stroke:#ccc}button.search-button{right:1px;width:30px}button.search-button svg{fill:#06c;width:16px}button.search-button:focus svg,button.search-button:hover svg{fill:#004080}button.clear-search:hover{color:#ccc}button.search-button:disabled svg{fill:#ccc}.loading{position:absolute;width:30px;right:52px;top:0;bottom:0}.loading svg{width:26px;padding-top:7px}</style><div id=\"input-box-wrapper\">\n    <slot></slot>\n\n    <span class=\"loading\" aria-hidden=\"true\" hidden>\n        <svg viewBox=\"0 0 40 40\" enable-background=\"new 0 0 40 40\">\n          <path opacity=\"0.2\" fill=\"#000\" d=\"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n          s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n          c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z\"/>\n          <path fill=\"#000\" d=\"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n          C22.32,8.481,24.301,9.057,26.013,10.047z\">\n          <animateTransform attributeType=\"xml\"\n            attributeName=\"transform\"\n            type=\"rotate\"\n            from=\"0 20 20\"\n            to=\"360 20 20\"\n            dur=\"0.5s\"\n            repeatCount=\"indefinite\"/>\n          </path>\n        </svg>\n    </span>\n\n    <button class=\"clear-search\" type=\"button\" aria-label=\"clear search query\" hidden>\n      <svg viewBox=\"0 0 40 40\" enable-background=\"new 0 0 40 40\">\n        <line x1=\"5\" y1=\"5\" x2=\"35\" y2=\"35\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\"></line>\n        <line x1=\"35\" y1=\"5\" x2=\"5\" y2=\"35\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\"></line>\n      </svg>\n    </button>\n\n    <button class=\"search-button\" type=\"button\" aria-label=\"Search\" disabled>\n      <svg viewBox=\"0 0 512 512\">\n        <path d=\"M256.233,5.756c-71.07,15.793-141.44,87.863-155.834,159.233c-11.495,57.076,0.3,111.153,27.688,154.335L6.339,441.172\n      c-8.596,8.596-8.596,22.391,0,30.987l33.286,33.286c8.596,8.596,22.391,8.596,30.987,0L192.26,383.796\n      c43.282,27.688,97.559,39.683,154.734,28.188c79.167-15.893,142.04-77.067,159.632-155.934\n      C540.212,104.314,407.968-27.93,256.233,5.756z M435.857,208.37c0,72.869-59.075,131.944-131.944,131.944\n      S171.969,281.239,171.969,208.37S231.043,76.426,303.913,76.426S435.857,135.501,435.857,208.37z\"/>\n      </svg>\n    </button>\n</div>\n<pfe-search-droplist id=\"dropdown\"></pfe-search-droplist>`;\n  }\n  static get tag() {\n    return \"pfe-autocomplete\";\n  }\n\n  get templateUrl() {\n    return \"pfe-autocomplete.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-autocomplete.scss\";\n  }\n\n  constructor() {\n    super(PfeAutocomplete);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.loading = false;\n    this.debounce = this.debounce || 300;\n\n    // input box\n    let slotNodes = this.shadowRoot.querySelector(\"slot\").assignedNodes();\n    let slotElems = slotNodes.filter(n => n.nodeType === Node.ELEMENT_NODE);\n    this._input = slotElems[0];\n    this._input.addEventListener(\"input\", this._inputChanged.bind(this));\n    this._input.addEventListener(\"blur\", this._closeDroplist.bind(this));\n    this._input.setAttribute(\"role\", \"combobox\");\n    this._input.setAttribute(\"aria-label\", \"Search\");\n    this._input.setAttribute(\"aria-autocomplete\", \"both\");\n    this._input.setAttribute(\"aria-haspopup\", \"true\");\n    this._input.setAttribute(\"type\", \"search\");\n    this._input.setAttribute(\"autocomplete\", \"off\");\n    this._input.setAttribute(\"autocorrect\", \"off\");\n    this._input.setAttribute(\"autocapitalize\", \"off\");\n    this._input.setAttribute(\"spellcheck\", \"false\");\n\n    // clear button\n    this._clearBtn = this.shadowRoot.querySelector(\".clear-search\");\n    this._clearBtn.addEventListener(\"click\", this._clear.bind(this));\n\n    // search button\n    this._searchBtn = this.shadowRoot.querySelector(\".search-button\");\n    this._searchBtn.addEventListener(\"click\", this._search.bind(this));\n\n    this._dropdown = this.shadowRoot.querySelector(\"#dropdown\");\n    this._dropdown.data = [];\n\n    this.activeIndex = null;\n\n    this.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\n    // these two events, fire search\n    this.addEventListener(\"pfe-search-event\", this._closeDroplist.bind(this));\n    this.addEventListener(\n      \"pfe-option-selected\",\n      this._optionSelected.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"keyup\", this._inputKeyUp);\n    this.removeEventListener(\"pfe-search-event\", this._closeDroplist);\n    this.removeEventListener(\"pfe-option-selected\", this._optionSelected);\n    this._input.removeEventListener(\"input\", this._inputChanged);\n    this._input.removeEventListener(\"blur\", this._closeDroplist);\n    this._clearBtn.removeEventListener(\"click\", this._clear);\n    this._searchBtn.removeEventListener(\"click\", this._search);\n  }\n\n  static get observedAttributes() {\n    return [\"init-value\", \"loading\", \"is-disabled\"];\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    let slotNodes = this.shadowRoot.querySelector(\"slot\").assignedNodes();\n    let slotElems = slotNodes.filter(n => n.nodeType === Node.ELEMENT_NODE);\n    let _input = slotElems[0];\n\n    let _clearBtn = this.shadowRoot.querySelector(\".clear-search\");\n    let _searchBtn = this.shadowRoot.querySelector(\".search-button\");\n\n    switch (attr) {\n      case \"loading\":\n        if (!this.loading || _input.value === \"\") {\n          this.shadowRoot.querySelector(\".loading\").setAttribute(\"hidden\", \"\");\n        } else {\n          this.shadowRoot.querySelector(\".loading\").removeAttribute(\"hidden\");\n        }\n        break;\n\n      case \"init-value\":\n        if (this[\"init-value\"] !== newVal) {\n          // set inputbox and buttons in the inner component\n          _input.value = newVal;\n          if (newVal !== \"\" && !this.isDisabled) {\n            _searchBtn.removeAttribute(\"disabled\");\n            _clearBtn.removeAttribute(\"hidden\");\n          } else {\n            _searchBtn.setAttribute(\"disabled\", \"\");\n            _clearBtn.setAttribute(\"hidden\", \"\");\n          }\n        }\n        break;\n\n      case \"is-disabled\":\n        if (this.isDisabled) {\n          _clearBtn.setAttribute(\"disabled\", \"\");\n          _searchBtn.setAttribute(\"disabled\", \"\");\n          _input.setAttribute(\"disabled\", \"\");\n        } else {\n          _clearBtn.removeAttribute(\"disabled\");\n          _searchBtn.removeAttribute(\"disabled\");\n          _input.removeAttribute(\"disabled\");\n        }\n        break;\n    }\n  }\n\n  get selectedValue() {\n    return this.getAttribute(\"selected-value\");\n  }\n\n  set selectedValue(val) {\n    this.setAttribute(\"selected-value\", val);\n  }\n\n  set isDisabled(value) {\n    if (value) {\n      this.setAttribute(\"is-disabled\", \"\");\n    } else {\n      this.removeAttribute(\"is-disabled\");\n    }\n  }\n\n  get isDisabled() {\n    return this.hasAttribute(\"is-disabled\");\n  }\n\n  set loading(value) {\n    const loading = Boolean(value);\n    if (loading) {\n      this.setAttribute(\"loading\", \"\");\n    } else {\n      this.removeAttribute(\"loading\");\n    }\n  }\n\n  get loading() {\n    return this.hasAttribute(\"loading\");\n  }\n\n  get initValue() {\n    return this.getAttribute(\"init-value\");\n  }\n\n  set initValue(val) {\n    this.setAttribute(\"init-value\", val);\n  }\n\n  get debounce() {\n    return this.getAttribute(\"debounce\");\n  }\n\n  set debounce(val) {\n    this.setAttribute(\"debounce\", val);\n  }\n\n  _inputChanged() {\n    if (this._input.value === \"\") {\n      this._searchBtn.setAttribute(\"disabled\", \"\");\n      this._clearBtn.setAttribute(\"hidden\", \"\");\n\n      this._reset();\n      return;\n    } else {\n      if (!this._input.hasAttribute(\"disabled\")) {\n        this._searchBtn.removeAttribute(\"disabled\");\n      }\n      this._clearBtn.removeAttribute(\"hidden\");\n    }\n\n    if (throttle === false) {\n      throttle = true;\n\n      window.setTimeout(() => {\n        this._sendAutocompleteRequest(this._input.value);\n        throttle = false;\n      }, this.debounce);\n    }\n  }\n\n  _clear() {\n    this._input.value = \"\";\n    this._clearBtn.setAttribute(\"hidden\", \"\");\n    this._searchBtn.setAttribute(\"disabled\", \"\");\n    this._input.focus();\n  }\n\n  _search() {\n    this._doSearch(this._input.value);\n  }\n\n  _closeDroplist() {\n    this._dropdown.open = null;\n    this._dropdown.removeAttribute(\"active-index\");\n  }\n\n  _openDroplist() {\n    this.activeIndex = null;\n    this._dropdown.setAttribute(\"open\", true);\n    this._dropdown.setAttribute(\"active-index\", null);\n  }\n\n  _optionSelected(e) {\n    let selectedValue = e.detail.optionValue;\n\n    // update input box with selected value from options list\n    this._input.value = selectedValue;\n\n    // send search request\n    this._doSearch(selectedValue);\n  }\n\n  _doSearch(searchQuery) {\n    this.dispatchEvent(\n      new CustomEvent(\"pfe-search-event\", {\n        detail: { searchValue: searchQuery },\n        bubbles: true,\n        composed: true\n      })\n    );\n    this._reset();\n    this.selectedValue = searchQuery;\n  }\n\n  _sendAutocompleteRequest(input) {\n    if (!this.autocompleteRequest) return;\n\n    this.autocompleteRequest(\n      { query: input },\n      this._autocompleteCallback.bind(this)\n    );\n  }\n\n  _autocompleteCallback(response) {\n    this._dropdown.data = response;\n    this._dropdown.reflow = true;\n    response.length !== 0 ? this._openDroplist() : this._closeDroplist();\n  }\n\n  _reset() {\n    debugger;\n    this._dropdown.activeIndex = null;\n    this._input.setAttribute(\"aria-activedescendant\", \"\");\n    this._dropdown.data = [];\n    this._closeDroplist();\n  }\n\n  _activeOption(activeIndex) {\n    if (activeIndex === null || activeIndex === \"null\") return;\n    return this._dropdown.shadowRoot.querySelector(\n      \"li:nth-child(\" + (parseInt(activeIndex, 10) + 1) + \")\"\n    ).innerHTML;\n  }\n\n  _inputKeyUp(e) {\n    let key = e.keyCode;\n\n    if (\n      this._dropdown.data.length === 0 &&\n      key !== KEYCODE.DOWN &&\n      key !== KEYCODE.UP &&\n      key !== KEYCODE.ENTER &&\n      key !== KEYCODE.ESC\n    )\n      return;\n\n    let activeIndex = this._dropdown.activeIndex;\n    let optionsLength = this._dropdown.data.length;\n\n    if (key == KEYCODE.ESC) {\n      this._closeDroplist();\n    } else if (key === KEYCODE.UP) {\n      if (!this._dropdown.open) {\n        return;\n      }\n\n      activeIndex =\n        activeIndex === null || activeIndex === \"null\"\n          ? optionsLength\n          : parseInt(activeIndex, 10);\n\n      activeIndex -= 1;\n\n      if (activeIndex < 0) {\n        activeIndex = optionsLength - 1;\n      }\n\n      this._input.value = this._activeOption(activeIndex);\n    } else if (key === KEYCODE.DOWN) {\n      if (!this._dropdown.open) {\n        return;\n      }\n\n      activeIndex =\n        activeIndex === null || activeIndex === \"null\"\n          ? -1\n          : parseInt(activeIndex, 10);\n      activeIndex += 1;\n\n      if (activeIndex > optionsLength - 1) {\n        activeIndex = 0;\n      }\n\n      this._input.value = this._activeOption(activeIndex);\n    } else if (key === KEYCODE.ENTER) {\n      let selectedValue = this._input.value;\n      this._doSearch(selectedValue);\n      return;\n    }\n\n    if (activeIndex !== null && activeIndex !== \"null\") {\n      this._input.setAttribute(\n        \"aria-activedescendant\",\n        \"option-\" + activeIndex\n      );\n    } else {\n      this._input.setAttribute(\"aria-activedescendant\", \"\");\n    }\n\n    this.activeIndex = activeIndex;\n    this._dropdown.activeIndex = activeIndex;\n  }\n}\n\n/*\n* - Attributes ------------------------------------\n* open               | Set when the combo box dropdown is open\n* active-index       | Set selected option\n* reflow             | Re-renders the dropdown\n\n* - Events ----------------------------------------\n* pfe-option-selected | Fires when an option is selected.\n  event.detailes.selectedValue contains the selected value.\n*/\nclass PfeSearchDroplist extends PFElement {\n\n  get html() {\n    return `<style>:host{position:relative;display:none;font-family:var(--pfe-theme--font-family);font-size:var(--pfe-theme--font-size);line-height:var(--pfe-theme--line-height)}:host([open]){display:block}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.droplist{position:absolute;top:100%;left:0;right:0;max-height:250px;z-index:9999;overflow-y:scroll;overflow-x:hidden;border:1px solid #ccc;background-color:#fff}ul{font-family:var(--pfe-theme--font-family);font-size:var(--pfe-theme--font-size);line-height:var(--pfe-theme--line-height);border-top:none;margin:0;padding:0;list-style:none;cursor:pointer}ul li{display:list-item;cursor:pointer;padding:10px;margin:0}ul li.active{background-color:#ececec;background-color:var(--pfe-theme--color--surface--lighter,#ececec)}</style><div class=\"suggestions-aria-help sr-only\" aria-hidden=\"false\" role=\"status\"></div>\n<div class=\"droplist\">\n  <ul role=\"listbox\" tabindex=\"-1\">\n  </ul>\n</div>`;\n  }\n  static get tag() {\n    return \"pfe-search-droplist\";\n  }\n\n  get templateUrl() {\n    return \"pfe-search-droplist.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-search-droplist.scss\";\n  }\n\n  constructor() {\n    super(PfeSearchDroplist);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._ariaAnnounce = this.shadowRoot.querySelector(\n      \".suggestions-aria-help\"\n    );\n\n    this.activeIndex = null;\n    this._ul = this.shadowRoot.querySelector(\"ul\");\n    this._ul.addEventListener(\"mousedown\", this._optionSelected.bind(this));\n  }\n\n  disconnectedCallback() {\n    this._ul.removeEventListener(\"mousedown\", this._optionSelected);\n  }\n\n  _optionSelected(e) {\n    if (e.target.tagName === \"LI\") {\n      this.dispatchEvent(\n        new CustomEvent(\"pfe-option-selected\", {\n          detail: { optionValue: e.target.innerText },\n          bubbles: true,\n          composed: true\n        })\n      );\n    }\n  }\n\n  _renderOptions() {\n    this.reflow = \"\";\n\n    let options = this.data;\n\n    this._ariaAnnounce.innerHTML = `There are ${\n      options.length\n    } suggestions. Use the up and down arrows to browse.`;\n    this._ariaAnnounce.setAttribute(\"aria-live\", \"polite\");\n\n    this._ul.innerHTML = `${options\n      .map((item, index) => {\n        return `<li id=\"option-${index}\" role=\"option\" tabindex=\"-1\" value=\"${item}\">${item}</li>`;\n      })\n      .join(\"\")}`;\n  }\n\n  static get observedAttributes() {\n    return [\"open\", \"reflow\", \"active-index\"];\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    if (this[name] !== newVal) {\n      this[name] = newVal;\n    }\n\n    if (attr === \"active-index\" && oldVal !== newVal) {\n      this._activeIndexChanged();\n    }\n\n    if (attr === \"reflow\") {\n      this._renderOptions();\n    }\n  }\n\n  _activeIndexChanged() {\n    if (\n      !this.data ||\n      this.data.length === 0 ||\n      this.activeIndex === null ||\n      this.activeIndex === \"null\"\n    )\n      return;\n\n    // remove active class\n    if (this._ul.querySelector(\".active\")) {\n      this._ul.querySelector(\".active\").classList.remove(\"active\");\n    }\n\n    // add active class to selected option\n    let activeOption = this._ul.querySelector(\n      \"li:nth-child(\" + (parseInt(this.activeIndex, 10) + 1) + \")\"\n    );\n\n    activeOption.classList.add(\"active\");\n\n    // scroll to selected element when selected item with keyboard is out of view\n    let ulWrapper = this.shadowRoot.querySelector(\".droplist\");\n    let activeOptionHeight = activeOption.offsetHeight;\n    activeOptionHeight += parseInt(\n      window.getComputedStyle(activeOption).getPropertyValue(\"margin-bottom\"),\n      10\n    );\n    ulWrapper.scrollTop =\n      activeOption.offsetTop - ulWrapper.offsetHeight + activeOptionHeight;\n  }\n\n  get open() {\n    return this.hasAttribute(\"open\");\n  }\n\n  set open(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"open\", \"\");\n    } else {\n      this.removeAttribute(\"open\");\n    }\n  }\n\n  get activeIndex() {\n    return this.getAttribute(\"active-index\");\n  }\n\n  set activeIndex(val) {\n    this.setAttribute(\"active-index\", val);\n  }\n\n  get reflow() {\n    return this.hasAttribute(\"reflow\");\n  }\n\n  set reflow(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"reflow\", \"\");\n    } else {\n      this.removeAttribute(\"reflow\");\n    }\n  }\n}\n\nPFElement.create(PfeSearchDroplist);\nPFElement.create(PfeAutocomplete);\n\nexport default PfeAutocomplete;\n//# sourceMappingURL=pfe-autocomplete.js.map\n"],"names":["KEYCODE","ENTER","DOWN","UP","ESC","throttle","PfeAutocomplete","PFElement","html","tag","templateUrl","styleUrl","[object Object]","super","connectedCallback","this","loading","debounce","slotElems","shadowRoot","querySelector","assignedNodes","filter","n","nodeType","Node","ELEMENT_NODE","_input","addEventListener","_inputChanged","bind","_closeDroplist","setAttribute","_clearBtn","_clear","_searchBtn","_search","_dropdown","data","activeIndex","_inputKeyUp","_optionSelected","removeEventListener","observedAttributes","attr","oldVal","newVal","attributeChangedCallback","value","removeAttribute","isDisabled","selectedValue","getAttribute","val","hasAttribute","Boolean","initValue","_reset","window","setTimeout","_sendAutocompleteRequest","focus","_doSearch","open","e","detail","optionValue","searchQuery","dispatchEvent","CustomEvent","searchValue","bubbles","composed","input","autocompleteRequest","query","_autocompleteCallback","response","reflow","length","_openDroplist","parseInt","innerHTML","key","keyCode","optionsLength","_activeOption","PfeSearchDroplist","_ariaAnnounce","_ul","target","tagName","innerText","options","map","item","index","join","name","_activeIndexChanged","_renderOptions","classList","remove","activeOption","add","ulWrapper","activeOptionHeight","offsetHeight","getComputedStyle","getPropertyValue","scrollTop","offsetTop","create"],"mappings":"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"}