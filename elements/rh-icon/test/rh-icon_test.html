<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <script src="/components/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="/components/web-component-tester/browser.js"></script>
    <script type="module" src="../rh-icon.js"></script>
  </head>
  <body>

    <rh-icon id="correct-icon" icon="rh-icon-server"></rh-icon>
    <rh-icon id="change-icon" icon="rh-icon-server"></rh-icon>
    <rh-icon id="bad-icon"></rh-icon>

    <rh-icon-panel icon="rh-icon-server">
      <h3 slot="header">This is rh-icon-panel</h3>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      <rh-cta slot="footer"><a href="#">Learn more</a></rh-cta>
    </rh-icon-panel>

    <rh-icon-panel icon="rh-icon-server-deploy">
      <h3 slot="header">This is rh-icon-panel</h3>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
    </rh-icon-panel>

    <script>
      const iconDefs = {
        server: "M25.11 14.11a.288.288 0 0 0-.16-.35l-2.82-1.38a.308.308 0 0 0-.13-.03H10.43c-.04 0-.08.01-.12.02l-3.24 1.38c-.14.06-.21.22-.17.36-.01.03-.02.05-.02.08v5.15c0 .17.14.31.31.31h17.63c.17 0 .31-.14.31-.31v-5.15c-.01-.03-.02-.05-.02-.08zm-14.62-1.15h11.44l1.89.92H8.32l2.17-.92zm14.02 6.08H7.49v-4.46h17.02v4.46zM8.62 16.79c0 .24.19.43.42.43s.42-.19.42-.42v-.01c0-.23-.19-.42-.42-.42s-.42.18-.42.42zm1.49 0v.01c0 .23.19.42.42.42s.42-.19.42-.42v-.01-.01c0-.23-.19-.42-.42-.42s-.42.19-.42.42v.01zm13.57 1.2c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.16h.61v-2.15h-.61v2.15zm-.92.16c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.16h.61v-2.15h-.61v2.15z",
        serverStack: "M25.11 6.52a.288.288 0 0 0-.16-.35l-2.82-1.38a.201.201 0 0 0-.13-.04H10.43c-.04 0-.08.01-.12.02L7.06 6.16a.3.3 0 0 0-.17.36c0 .02-.01.05-.01.08v20.34c0 .17.14.31.31.31h17.63c.17 0 .31-.14.31-.31V16.78v-.02V6.6c-.01-.03-.02-.06-.02-.08zM10.49 5.37h11.44l1.89.92H8.32l2.17-.92zm14.02 21.26H7.49v-4.46h17.02v4.46zm0-5.07H7.49V17.1h17.02v4.46zm0-5.12H7.49v-4.46h17.02v4.46zm0-7.65v.91-.91zm0 2.58H7.49V6.9h17.02v4.47zM8.62 9.06c0 .24.19.43.42.43s.42-.19.42-.42v-.01c0-.23-.19-.42-.42-.42s-.42.18-.42.42zm1.49 0v.01c0 .23.19.42.42.42s.42-.19.42-.42v-.01-.01c0-.23-.19-.42-.42-.42s-.42.19-.42.42v.01zm-1.49 5.21c0 .24.19.43.42.43s.42-.19.42-.42v-.01c0-.23-.19-.42-.42-.42s-.42.18-.42.42zm1.49 0v.01c0 .23.19.42.42.42s.42-.19.42-.42v-.01-.01c0-.23-.19-.42-.42-.42s-.42.19-.42.42v.01zm-1.49 4.91c0 .24.19.43.42.43s.42-.19.42-.42c0-.23-.19-.42-.42-.42s-.42.17-.42.41c0-.01 0-.01 0 0zm1.49 0v.01c0 .23.19.42.42.42s.42-.19.42-.42v-.01-.01c0-.23-.19-.42-.42-.42s-.42.19-.42.42v.01zm-1.49 5.21c0 .24.19.43.42.43s.42-.19.42-.42c0-.23-.19-.42-.42-.42s-.42.17-.42.41c0-.01 0 0 0 0zm1.49 0v.01c0 .23.19.42.42.42s.42-.19.42-.42v-.01-.01c0-.23-.19-.42-.42-.42s-.42.19-.42.42v.01zm13.57-14c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15V7.94c0-.09.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61V8.09h-.61v2.15zm-.91.15c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15V7.94c0-.09.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61V8.09h-.61v2.15zm2.75 5.36c0 .09-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61V13.3h-.61v2.15zm-.91.15c0 .09-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61V13.3h-.61v2.15zm2.75 5.06c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61v-2.15h-.61v2.15zm-.91.15c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61v-2.15h-.61v2.15zm2.75 5.36c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61v-2.15h-.61v2.15zm-.91.15c0 .08-.07.15-.15.15h-.92c-.08 0-.15-.07-.15-.15v-2.45c0-.08.07-.15.15-.15h.92c.08 0 .15.07.15.15v2.45zm-.92-.15h.61v-2.15h-.61v2.15z",
      };

      suite('<rh-icon>', () => {
        setup(() => {
          sinon.spy(console, "warn");
        });

        teardown(() => {
          console.warn.restore();
        });

        test('it should upgrade', () => {
          assert.instanceOf(
            document.querySelector('rh-icon'),
            customElements.get('rh-icon'),
            'the <rh-icon> should be an instance of RhPanel'
          );
        });
        test('it should show the correct icon', () => {
          const rhIcon = document.querySelector('rh-icon#correct-icon');
          const d = rhIcon.shadowRoot.querySelector('svg g path').getAttribute('d');

          assert.equal(iconDefs.server, d, 'rh-icon grab the d attribute from the requested icon svg');
        });

        test('it should update the icon if the icon attribute changes', () => {
          const rhIcon = document.querySelector('rh-icon#change-icon');
          const newIcon = 'rh-icon-server-stack';

          rhIcon.setAttribute('icon', newIcon);

          const d = rhIcon.shadowRoot.querySelector('svg g path').getAttribute('d');

          assert.equal(iconDefs.serverStack, d, `rh-icon compare the icon svg's \`d\` attribute to the expected ${newIcon} d attribute`);
        });

        test('it should fail gracefully if the requested icon does not exist', () => {
          const rhIcon = document.querySelector('rh-icon#bad-icon');
          const icon = 'something-that-does-not-exist';

          rhIcon.setAttribute('icon', icon);

          assert(console.warn.calledWith(`rh-icon: unable to find svg path for ${icon}`));
        });
      });
    </script>
  </body>
</html>
