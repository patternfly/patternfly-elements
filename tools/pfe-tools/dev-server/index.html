{% set groupeddemos = demos | sort(false, false, 'permalink') | groupby('primaryElementName') %}
{% if demo.title %}
{% set title = demo.title + ' | ' + options.site.title %}
{% else %}
{% set title = options.site.title %}
{% endif %}
<!DOCTYPE html>
<html lang="en" dir="ltr" unresolved>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ options.site.description }}">
  <meta name="pf-track-performance" content="true">
  <link href="{{ options.site.favicon }}" rel="shortcut icon">
  <title>{{ title }}</title>
  <link rel="stylesheet" href="/node_modules/@patternfly/pfe-tools/dev-server/fonts.css">
  <link rel="stylesheet" href="/node_modules/@patternfly/pfe-tools/dev-server/demo.css">
  {% for sheet in options.site.stylesheets %}
  <link rel="stylesheet" href="{{sheet}}">
  {% endfor %}
  <script type="module">
    import 'construct-style-sheets-polyfill';
    import 'element-internals-polyfill';
    import '@patternfly/elements/pf-button/pf-button.js';
    import '@patternfly/elements/pf-card/pf-card.js';
    import '@patternfly/elements/pf-icon/pf-icon.js';
    import '@patternfly/pfe-tools/dev-server/demo.js';
  </script>
</head>

<body class="menu-open">
  <header>
    <div class="header-bar">
      <div class="pf-bar">
        <a href="https://www.patternfly.org/" class="cta">
          PatternFly.org
        </a>
        <a href="https://github.com/patternfly/patternfly-elements" class="cta">
          <pf-icon size="md" icon="github" set="fab" aria-hidden="true"></pf-icon>
          Contribute on GitHub
        </a>
      </div>
      <div class="logo-bar">
        <a href="/" aria-label="PatternFly Elements Home">
          <img src="{{ options.site.logoUrl }}" alt="PatternFly Elements">
        </a>
      </div>
  </header>
  <aside id="sidebar" aria-expanded="true">
    <nav id="nav" aria-label="Main Navigation">
      <ul id="elements-container">
        {% for primary, group in groupeddemos %}
        {% set first = group['0'] %}
        {% if group.length > 1 %}
        <li>
          <details {{ 'open' if demo.primaryElementName==primary }}>
            <summary>{{ first.title }}</summary>
            <ul>{% for d in group %}
              <li>
                <a href="{{ d.permalink | replace(demoURLPrefix, '/') }}">{{ d.title }}</a>
              </li>{% endfor %}
            </ul>
          </details>
        </li>{% else %}
        <li>
          <a href="{{ first.permalink | replace(demoURLPrefix, '/') }}">{{ first.title }} </a>
        </li>{% endif %}{% endfor %}
      </ul>
    </nav>
  </aside>
  <main>{% if templateContent %}
    <div data-demo="{{ demo.tagName }}">{{ templateContent | safe }}</div>{% else %}
    <section id="components">
      {% for primary, group in groupeddemos %}
      {% set first = group['0'] %}
      <pf-card rounded compact>
        <h2 slot="header">{{ first.title }}</h2>
        <a href="{{ first.permalink | replace(demoURLPrefix, '/') }}">
          <img src="/elements/{{ primary }}/docs/screenshot.png" alt="{{ primary }}">
        </a>
        <ul>{% for d in group %}{% if not loop.first %}
          <li>
            <a href="{{ d.permalink | replace(demoURLPrefix, '/') }}">{{ d.title }}</a>
          </li>{% endif %}{% endfor %}
        </ul>
      </pf-card>{% endfor %}
    </section>
    {% endif %}
  </main>
</body>

</html>
